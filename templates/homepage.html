{% extends 'base.html' %}

{% block content %}
<div id="status" class="alert alert-primary alert-dismissible fade show" role="alert" style="display: none;">
    <p id="status-message" class="no-margin"></p>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

{% if new_versions %}
<div class="alert alert-primary alert-dismissible fade show" role="alert">
    <p>
        Since your last visit new MITRE version(s) released:
        <ul>
        {% for v in new_versions %}
            <li>{{ v }}</li>
        {% endfor %}
        </ul>
    </p>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}

<h2>Start a new Upgrade</h2>
<form id="upgrade_form" method="POST" action="{{ url_for('initiate_upgrade') }}">
    <label for="version_select">Choose your current version:</label>
    <br>
    <select id="version_select" name="version_select">
        {% for v in versions %}
        <option value="{{ v.name }}">{{ v.name }}</option>
        {% endfor %}
    </select>
    <p id="text"></p>
    <input type="submit" value="Click to continue">
    <br><br><br>
</form>

{# List all current upgrades #}
{% if upgrades %}
<h2>Current Upgrades</h2>
{% endif %}
<p>
    <ul id="upgrades">
    {% for u in upgrades %}
        <li><a href="{{ url_for('upgrade', from_version=u.from_version, to_version=u.to_version) }}" target="_blank">{{ u.from_version }} to {{ u.to_version }}</a></li>
    {% endfor %}
    </ul>
</p>
{% endblock %}

{% block scripts_bottom %}
<script src="{{ url_for('static', filename='homepage.js') }}"></script>
{% endblock %}